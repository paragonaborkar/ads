<div class="row">
    <div class="col-md-11 ">
        <span class="h3">Native User Administration</span>
    </div>
    <div class="col-md-1 ">
        <!-- TODO: Implement the column preferences for this page: -->
        <a (click)="getPreferences()">
          <i class="fa fa-cog fa-2x" title="Settings"></i>
        </a>
    </div>
</div>

<div class="row mt-3 mb-2">
    <div class="col-md-12">
        <button class="btn btn-primary" (click)="showAddUser()">Add User</button>
    </div>
</div>

<!-- WE WANT TO MAKE THIS CODE WORK WITH PREFERENCES -->
<!-- https://l-lin.github.io/angular-datatables/#/getting-started -->
<div class="row">
    <div class="col-md-12">
        <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover">
            <thead>
                <tr>
                    <th *ngFor="let col of columns | arrayFilter:columnFilterArgs">{{col.field | friendlyLabel}}</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of users">
                    <td *ngFor="let col of columns | arrayFilter:columnFilterArgs">{{user[col.field]}}</td>
                    <td>
                        <div class="text-center">
                            <i (click)="edit(user)" class="fa fa-pencil-square-o text-primary"></i> &nbsp;&nbsp;&nbsp;&nbsp;
                            <i (click)="delete(user)" class="fa fa-trash-o text-danger"></i>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- WE WANT TO REPLACE THIS CODE WITH THE ABOVE DATA TABLE. -->
<!-- <div class="row">
    <div class="col-md-12">
        <p-dataTable [value]="users" [rows]="5" [paginator]="true" [editable]="true" #dt>
            <p-column *ngFor="let col of columns" [field]="col.field" [header]="col.header" [hidden]="col.hidden" [filter]="true" filterPlaceholder="Search"
                filterMatchMode="{{col.filterMatchMode}}">

               
                <ng-template pTemplate="filter" let-col *ngIf="col.template && col.field==='userRoleId'">
                    <p-dropdown [options]="roles" [style]="{'width':'100%'}" (onChange)="dt.filter($event.value,col.field,col.filterMatchMode)"
                        styleClass="ui-column-filter"></p-dropdown>
                </ng-template>

              
                <ng-template pTemplate="body" let-rowData="rowData" *ngIf="col.template && col.field==='userRoleId'">
                    {{roleArray[rowData.userRoleId]}}
                </ng-template>

                
                <ng-template pTemplate="filter" let-col *ngIf="col.template && col.field==='enabled'">
                    <p-dropdown [options]="enabledValues" [style]="{'width':'100%'}" (onChange)="dt.filter($event.value,col.field,col.filterMatchMode)"
                        styleClass="ui-column-filter"></p-dropdown>
                </ng-template>


                <ng-template pTemplate="body" let-rowData="rowData" *ngIf="col.template && col.field==='enabled'">
                    {{rowData.enabled? 'Yes' : 'No'}}
                </ng-template>
            </p-column>

            
            <p-column header="Actions" icon="fa-check">
                <ng-template pTemplate="body" let-rowData="rowData">
                    <div class="text-center">
                        <i (click)="edit(rowData)" class="fa fa-pencil-square-o text-primary"></i> &nbsp;&nbsp;&nbsp;&nbsp;
                        <i (click)="delete(rowData)" class="fa fa-trash-o text-danger"></i>
                    </div>
                </ng-template>

            </p-column>
        </p-dataTable>
    </div>
</div> -->


<!-- Modals -->
<app-adduser *ngIf="isAddUserModal" (onHide)="onHide('add')" [config]="{ show: true }" bsModal #addModal="bs-modal" (yes)="addUser($event)"
    (cancel)="onClose('add')" class="modal fade"></app-adduser>

<app-updateuser *ngIf="isUpdateModal" (onHide)="onHide('update')" [config]="{ show: true }" bsModal #updateModal="bs-modal"
    (yes)="updateUser($event)" (cancel)="onClose('update')" class="modal fade" [User]="User"></app-updateuser>

<app-deleteuser *ngIf="isDeleteModal" (onHide)="onHide('delete')" [config]="{ show: true }" bsModal #deleteModal="bs-modal"
    (yes)="deleteUser($event)" (cancel)="onClose('delete')" class="modal fade" [User]="User"></app-deleteuser>